cmake_minimum_required(VERSION 2.8)

project(libcproducer-download NONE)

include(ExternalProject)

set(BUILD_COMMON_LWS
    FALSE
    CACHE BOOL "Build ProducerC without LWS Support" FORCE)
set(BUILD_COMMON_CURL
    TRUE
    CACHE BOOL "Build ProducerC with CURL Support" FORCE)

ExternalProject_Add(libcproducer-download
    GIT_REPOSITORY    https://github.com/awslabs/amazon-kinesis-video-streams-producer-c
    GIT_TAG           master
    PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/build
    CMAKE_ARGS
        -DCMAKE_INSTALL_PREFIX=${OPEN_SRC_INSTALL_PREFIX}
        -DBUILD_COMMON_LWS=${BUILD_COMMON_LWS}
        -DBUILD_COMMON_CURL=${BUILD_COMMON_CURL}
        -DBUILD_DEPENDENCIES=FALSE
        -DOPEN_SRC_INSTALL_PREFIX=${OPEN_SRC_INSTALL_PREFIX}
    BUILD_ALWAYS      TRUE
    TEST_COMMAND      ""
)
